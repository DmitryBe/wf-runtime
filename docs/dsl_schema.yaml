# GENERATED FILE - DO NOT EDIT BY HAND
# Source: Workflow.model_json_schema(by_alias=True)
$defs:
  BranchEdge:
    properties:
      from:
        description: Source node_id
        title: From
        type: string
      routes:
        description: Routes to take
        items:
          $ref: '#/$defs/EdgeRoute'
        title: Routes
        type: array
    required:
    - from
    - routes
    title: BranchEdge
    type: object
  EdgeRoute:
    properties:
      to:
        description: Target node_id
        title: To
        type: string
      when_label:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Condition to take this route
        title: When Label
    required:
    - to
    title: EdgeRoute
    type: object
  HttpRequestNode:
    properties:
      id:
        description: Unique node ID
        title: Id
        type: string
      input_mapping:
        additionalProperties: true
        description: 'Input mapping, e.g. {''x'': ''$input.x''}'
        title: Input Mapping
        type: object
      kind:
        const: http_request
        default: http_request
        title: Kind
        type: string
      name:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Node name
        title: Name
      output_mapping:
        additionalProperties: true
        description: 'Output mapping, e.g. {''x'': ''$.x'', ''y'': ''$.y''} to map
          specific fields from the node result or {} to map the entire node result'
        title: Output Mapping
        type: object
      timeout_s:
        default: 5.0
        description: Timeout in seconds
        title: Timeout S
        type: number
    required:
    - id
    title: HttpRequestNode
    type: object
  Input:
    properties:
      schema:
        anyOf:
        - type: string
        - additionalProperties: true
          type: object
        default:
          type: object
        description: 'Input schema, e.g. {''type'': ''object'', ''properties'': {''x'':
          {''type'': ''integer''}}}'
        title: Schema
    title: Input
    type: object
  JQNode:
    properties:
      code:
        description: 'JQ code to execute. Example: {x: .x, doubled: (.x * 2)}'
        title: Code
        type: string
      id:
        description: Unique node ID
        title: Id
        type: string
      input_mapping:
        additionalProperties: true
        description: 'Input mapping, e.g. {''x'': ''$input.x''}'
        title: Input Mapping
        type: object
      kind:
        const: jq_transform
        default: jq_transform
        title: Kind
        type: string
      name:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Node name
        title: Name
      output_mapping:
        additionalProperties: true
        description: 'Output mapping, e.g. {''x'': ''$.x'', ''y'': ''$.y''} to map
          specific fields from the node result or {} to map the entire node result'
        title: Output Mapping
        type: object
    required:
    - id
    - code
    title: JQNode
    type: object
  LLMNode:
    properties:
      id:
        description: Unique node ID
        title: Id
        type: string
      input_mapping:
        additionalProperties: true
        description: 'Input mapping, e.g. {''x'': ''$input.x''}'
        title: Input Mapping
        type: object
      kind:
        const: llm
        default: llm
        title: Kind
        type: string
      model:
        description: LLM model name, e.g. 'openai:gpt-4.1-mini'
        title: Model
        type: string
      model_params:
        additionalProperties: true
        description: 'LLM model parameters, e.g. {''temperature'': 0.5}'
        title: Model Params
        type: object
      name:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Node name
        title: Name
      output_mapping:
        additionalProperties: true
        description: 'Output mapping, e.g. {''x'': ''$.x'', ''y'': ''$.y''} to map
          specific fields from the node result or {} to map the entire node result'
        title: Output Mapping
        type: object
      output_schema:
        anyOf:
        - $ref: '#/$defs/LLMSchema'
        - type: 'null'
        default: null
        description: Output schema.
      prompt:
        anyOf:
        - type: string
        - items:
            $ref: '#/$defs/LLMPromptPart'
          type: array
        description: "Prompt to send to the LLM.\n\nSupported formats:\n- Text-only:\
          \ a plain string.\n- Multimodal: a list of objects with keys {type, content}.\n\
          \nText prompt example:\n```\nYou are a strict classifier.\nTask: classify\
          \ the user's text into exactly one label:\n- positive\n- negative\nText:\n\
          {text}\n```\n\nMultimodal prompt example:\n```\n[\n  {\"type\": \"text\"\
          , \"content\": \"Analyze the image carefully and list 3 potential hygiene\
          \ issues.\"},\n  {\"type\": \"image_url\", \"content\": \"https://example.com/kitchen.jpg\"\
          },\n]\n```\n\nImage can also be passed as a data-URI, e.g.\n```\n{\"type\"\
          : \"image_url\", \"content\": f\"data:{mime};base64,{b64}\"}\n```"
        title: Prompt
    required:
    - id
    - model
    - prompt
    title: LLMNode
    type: object
  LLMPromptPart:
    description: 'A single multimodal prompt part.


      We use an object here (instead of a 2-tuple) because OpenAI''s structured-output

      JSON Schema subset does not support tuple-style schemas (Pydantic emits

      `prefixItems`), which breaks `response_format` validation.'
    properties:
      content:
        description: 'Part content.

          - For type=''text'': the text content.

          - For type=''image_url'': a URL or a data-URI (data:{mime};base64,{b64}).'
        title: Content
        type: string
      type:
        description: 'Part type: ''text'' or ''image_url''.'
        enum:
        - text
        - image_url
        title: Type
        type: string
    required:
    - type
    - content
    title: LLMPromptPart
    type: object
  LLMSchema:
    description: Schema for LLM output.
    properties:
      description:
        description: Schema description, e.g. 'Output of the intent classifier'
        title: Description
        type: string
      properties:
        additionalProperties: true
        description: 'Schema properties, e.g. {''intent'': {''type'': ''string'',
          ''enum'': [''positive'', ''negative'']}}'
        title: Properties
        type: object
      required:
        anyOf:
        - items:
            type: string
          type: array
        - type: 'null'
        default: null
        description: Schema required fields (optional)
        title: Required
      title:
        description: Schema title, e.g. 'intent_classifier_output'
        title: Title
        type: string
      type:
        default: object
        description: Schema type, e.g. 'object'
        title: Type
        type: string
    required:
    - title
    - description
    title: LLMSchema
    type: object
  NoopNode:
    properties:
      id:
        description: Unique node ID
        title: Id
        type: string
      input_mapping:
        additionalProperties: true
        description: 'Input mapping, e.g. {''x'': ''$input.x''}'
        title: Input Mapping
        type: object
      kind:
        const: noop
        default: noop
        title: Kind
        type: string
      name:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Node name
        title: Name
      output_mapping:
        additionalProperties: true
        description: 'Output mapping, e.g. {''x'': ''$.x'', ''y'': ''$.y''} to map
          specific fields from the node result or {} to map the entire node result'
        title: Output Mapping
        type: object
    required:
    - id
    title: NoopNode
    type: object
  Output:
    properties:
      input_mapping:
        additionalProperties: true
        description: 'Input mapping, e.g. {''x'': ''$result.x''}'
        title: Input Mapping
        type: object
      schema:
        anyOf:
        - type: string
        - additionalProperties: true
          type: object
        - type: 'null'
        default:
          type: object
        description: 'Output schema, e.g. {''type'': ''object'', ''properties'': {''x'':
          {''type'': ''integer''}}} The output shcmea must always be object, if properties
          are not specified, the entire node result is mapped'
        title: Schema
    required:
    - input_mapping
    title: Output
    type: object
  PythonCodeNode:
    properties:
      code:
        description: 'Python code to execute.

          Must return the result as a dict.

          Example:

          ```

          x_doubled = input["x"] * 2

          text_upper = input["text"].upper()

          return {"x_doubled": x_doubled, "text_upper": text_upper}```'
        title: Code
        type: string
      id:
        description: Unique node ID
        title: Id
        type: string
      input_mapping:
        additionalProperties: true
        description: 'Input mapping, e.g. {''x'': ''$input.x''}'
        title: Input Mapping
        type: object
      kind:
        const: python_code
        default: python_code
        title: Kind
        type: string
      name:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Node name
        title: Name
      output_mapping:
        additionalProperties: true
        description: 'Output mapping, e.g. {''x'': ''$.x'', ''y'': ''$.y''} to map
          specific fields from the node result or {} to map the entire node result'
        title: Output Mapping
        type: object
      timeout_s:
        default: 1.0
        description: Timeout in seconds
        title: Timeout S
        type: number
    required:
    - id
    - code
    title: PythonCodeNode
    type: object
  RouterNode:
    properties:
      cases:
        additionalProperties:
          type: string
        description: 'Routing cases. Example: {''node_id'': ''condition''} where condition
          is a python expression, example: ''$input.x == ''a'''' or ''$nodes.y.z ==
          ''b'''', etc.'
        title: Cases
        type: object
      default:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Default node_id to take if no cases match
        title: Default
      id:
        description: Unique node ID
        title: Id
        type: string
      kind:
        const: router
        default: router
        title: Kind
        type: string
      name:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Node name
        title: Name
    required:
    - id
    - cases
    title: RouterNode
    type: object
  SimpleEdge:
    properties:
      from:
        description: Source node_id
        title: From
        type: string
      to:
        description: Target node_id
        title: To
        type: string
      when_label:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Condition to take this route
        title: When Label
    required:
    - from
    - to
    title: SimpleEdge
    type: object
  ToolNode:
    properties:
      config:
        additionalProperties: true
        title: Config
        type: object
      id:
        description: Unique node ID
        title: Id
        type: string
      input_mapping:
        additionalProperties: true
        description: 'Input mapping, e.g. {''x'': ''$input.x''}'
        title: Input Mapping
        type: object
      kind:
        const: tool
        default: tool
        title: Kind
        type: string
      name:
        anyOf:
        - type: string
        - type: 'null'
        default: null
        description: Node name
        title: Name
      output_mapping:
        additionalProperties: true
        description: 'Output mapping, e.g. {''x'': ''$.x'', ''y'': ''$.y''} to map
          specific fields from the node result or {} to map the entire node result'
        title: Output Mapping
        type: object
      type:
        title: Type
        type: string
    required:
    - id
    - type
    title: ToolNode
    type: object
description: Top-level workflow definition.
properties:
  edges:
    description: 'Workflow edges.

      Edges may reference the implicit ''start'' and ''end'' nodes (do not add them
      to `nodes`).

      Example: [{"from": "start", "to": "node_id"}, {"from": "node_id", "to": "end"}]'
    items:
      anyOf:
      - $ref: '#/$defs/SimpleEdge'
      - $ref: '#/$defs/BranchEdge'
    title: Edges
    type: array
  fail_fast:
    default: true
    description: Whether to fail fast the workflow if any node fails
    title: Fail Fast
    type: boolean
  id:
    description: Unique workflow ID
    title: Id
    type: string
  input:
    $ref: '#/$defs/Input'
    description: Workflow input schema
  name:
    anyOf:
    - type: string
    - type: 'null'
    default: null
    description: Workflow name
    title: Name
  nodes:
    description: Workflow nodes. You should never create start or end nodes yourself,
      they are added by default.
    items:
      anyOf:
      - $ref: '#/$defs/NoopNode'
      - $ref: '#/$defs/ToolNode'
      - $ref: '#/$defs/LLMNode'
      - $ref: '#/$defs/JQNode'
      - $ref: '#/$defs/PythonCodeNode'
      - $ref: '#/$defs/RouterNode'
      - $ref: '#/$defs/HttpRequestNode'
    title: Nodes
    type: array
  output:
    $ref: '#/$defs/Output'
    description: Workflow output schema
  version:
    description: Workflow version
    title: Version
    type: integer
required:
- id
- version
- input
- output
- nodes
- edges
title: Workflow
type: object
